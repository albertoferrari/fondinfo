<!--
Google IO 2012 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahe <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title>Python for data analysis</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="all" href="theme/css/tomamic.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

<slide class="title-slide segue nobackground">
  <aside class="gdbar"><img src="images/logo.png"></aside>
  <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
  <h1 data-config-title><!-- populated from slide_config.json --></h1>
  <figure><img src="images/oop/modules.png"></figure>
  <hgroup>
    <h2>NumPy, Pandas, PyPlotLib</h2>
    <p>Michele Tomaiuolo<br>Ingegneria dell'Informazione, UniPR</p>
  </hgroup>
</slide>


<slide  >
  
    <hgroup>
      <h2>Python applications</h2>
      <h3></h3>
    </hgroup>
    <article >
      <p><img alt="" src="images/algo/python-cases.jpg" /></p>
<ul>
<li>Web, data analysis, scripting, teaching, games, hardware, multiplatform...</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Readability counts</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/algo/perfect-square.svg">
        
      </figure><pre class="prettyprint" data-lang="python"><code>n = 0
while n &lt;= 0:
    n = int(input("Positive val? "))

ans = 1
while ans * ans &lt; n:
    ans += 1

if ans * ans == n:
    print("Square root:", ans)
else:
    print("Not a perfect square")
</code></pre>
<blockquote></blockquote>
<p><a href="http://www.ce.unipr.it/brython/?p1_perfect_square.py">http://www.ce.unipr.it/brython/?p1_perfect_square.py</a></p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Functions</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/fun/function.png">
        
      </figure><ul>
<li><strong><code>def</code></strong>, to define a function</li>
<li><strong><code>return</code></strong>, to (optionally) return the result</li>
<li>Then, you <strong>call</strong> a function to execute it</li>
<li>Type <em>annotations</em> for params and return value are optional and not verified</li>
</ul>
<pre class="prettyprint" data-lang="python"><code>def hypotenuse(leg1: float, leg2: float) -&gt; float:
    hyp = (leg1 ** 2 + leg2 ** 2) ** 0.5
    return hyp

result = hypotenuse(3, 4)  # 5.0
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>List</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/fun/month-list.svg">
        
      </figure><ul>
<li><strong>Mutable</strong> sequence of elements</li>
<li><em>Usually</em> of the same <em>type</em></li>
<li>Current <em>length</em> of a list <code>x</code>: <code>len(x)</code></li>
<li>Elements <em>enumerated</em> from <code>0</code> to <code>len(x)-1</code></li>
</ul>
<pre class="prettyprint" data-lang="python"><code>months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
          "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
</code></pre>
<pre class="prettyprint" data-lang="python"><code>num_days = [31, 28, 31, 30, 31, 30,
            31, 31, 30, 31, 30, 31]
</code></pre>
<pre class="prettyprint" data-lang="python"><code>results_by_month = [0] * 12  # List repetition
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Elements and slices</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/fun/wile-coyote.png">
        
      </figure><ul>
<li><strong>Attention: use valid indices!</strong><ul>
<li>But <em>negative</em> indices counts from the end</li>
</ul>
</li>
</ul>
<pre class="prettyprint" data-lang="python"><code>n = len(months)            # 12
months[3]                  # "Apr"
months[-2]                 # "Nov", same as n - 2

spring = months[2:5]       # ["Mar", "Apr", "May"]
quart1 = months[:3]        # ["Jan", "Feb", "Mar"]
quart4 = months[-3:]       # ["Oct", "Nov", "Dec"]
whole_year = months[:]     # Copy of the whole list
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Insertion and removal</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/fun/shopping-list.png">
        
      </figure><pre class="prettyprint" data-lang="python"><code>grocery = ["spam", "egg", "beans"]

grocery[0] = "sausage"      # replace an element

grocery.append("bacon")     # add an element to the end
grocery.pop()               # remove (and return) last element

grocery.insert(1, "bacon")  # other elements shift
removed = grocery.pop(1)    # remove (and return) element at index

if "egg" in grocery:       # True, grocery contains "egg"
    grocery.remove("egg")  # remove an element by value
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Equality and identity</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="python"><code>a = ["spam", "egg", "beans"]
b = a[:]         # new list!
b == a           # True, they contain the same values
b is a           # False, they are two objects in memory
                 # (try and modify one of them...)
c = a
c is a           # True, same object in memory
                 # (try and modify one of them...)

d = ["sausage", "mushrooms"]
grocery = c + d  # list concatenation --&gt; new list!
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Strings and lists</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li><strong>String</strong>: <em>immutable</em> sequence of chars</li>
<li><strong><code>join</code></strong> and <strong><code>split</code></strong>: from list to string and viceversa</li>
</ul>
<pre class="prettyprint" data-lang="python"><code>txt = "Monty Python's Flying Circus"
txt[3]    # 't'
txt[-2]   # 'u'
txt[6:12] # "Python"
txt[-6:]  # "Circus"

days = ["tue", "thu", "sat"]
txt = "|".join(days)  # "tue|thu|sat"

days = "mon|wed|fri".split("|")
# ["mon", "wed", "fri"]
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Tuple</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li><strong>Immutable</strong> sequence of values, even of <em>different type</em></li>
</ul>
<pre class="prettyprint" data-lang="python"><code># Tuple packing
pt = 5, 6, "red"
pt[0]  # 5
pt[1]  # 6
pt[2]  # "red"

# multiple assignments, from a tuple
x, y, colour = pt  # sequence unpacking
a, b = 3, 4
a, b = b, a
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Cycles on sequences: for</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="python"><code>grocery = ["spam", "egg", "bacon", "sausage"]
for product in grocery:
    print(product)
</code></pre>
<pre class="prettyprint" data-lang="python"><code>for val in range(0, 5):
    print(val * val, end=" ")  # 0 1 4 9 16
</code></pre>
<ul>
<li>At each iteration, a different element of <code>grocery</code> is assigned to <code>product</code></li>
<li>A <code>for</code> cycle can be used on any kind of sequence: list, string, tuple, range...</li>
<li><strong><code>range</code></strong>: range of consecutive values<ul>
<li>Lower end <em>included</em> (defaults to 0)</li>
<li>Upper end <em>excluded</em></li>
</ul>
</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Functions on lists</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="python"><code>def limit_values(values, max_val):
    # procedure: process data, no direct result
    for i in range(len(values)):
        if values[i] &gt; max_val:
            values[i] = max_val

    # the pythonic way: for i, val in enumerate(values): ...

def main ():
    data = [5, 4, 2]
    limit_values(data, 4)
    print(data)

main()
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>List comprehension</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/dev/computer-ninja.png">
        
      </figure><ul>
<li>Terse way to create a list</li>
<li>Each element: result of an operation on a member of another iterable</li>
<li>Condition on elements, optional</li>
</ul>
<pre class="prettyprint" data-lang="python"><code>squares = [x ** 2 for x in range(12)]
# squares = []
# for x in range(12):
#    squares.append(x ** 2)
</code></pre>
<pre class="prettyprint" data-lang="python"><code>even_nums = [str(x) for x in range(12) if (x % 2) == 0]
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Enumerate</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/repr/child-fingers.png">
        
      </figure><ul>
<li>To couple each value of a sequence to an increasing index</li>
<li>It generates a sequence of tuples (pairs)</li>
<li>In <code>for</code> cycles, using both value and index</li>
</ul>
<pre class="prettyprint" data-lang="python"><code>&gt;&gt;&gt; grocery = ["spam", "egg", "bacon", "sausage"]
&gt;&gt;&gt; list(enumerate(grocery))
[(0, "spam"), (1, "egg"), (2, "bacon"), (3, "sausage")]
</code></pre>
<pre class="prettyprint" data-lang="python"><code>grocery = ["spam", "egg", "bacon", "sausage"]
for i, val in enumerate(grocery):
    print(i, val)
</code></pre>
<blockquote></blockquote>
<p>Results in a list: only (!) to visualize them <br>
Otherwise, Python doesn't generate results immediately (<em>lazy</em>)</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Zip</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/fun/zip.png">
        
      </figure><ul>
<li>Couples elements of two sequences</li>
<li>It generates a sequence of tuples (pairs)</li>
<li>The result has the len of the shortest sequence</li>
</ul>
<pre class="prettyprint" data-lang="python"><code>&gt;&gt;&gt; grocery = ["spam", "egg", "bacon", "sausage"]
&gt;&gt;&gt; quantities = ["100 g", "6 pc", "200 g", "500 g", "too much"]
&gt;&gt;&gt; list(zip(grocery, quantities))
[("spam", "100 g"), ("egg", "6 pc"), ("bacon", "200 g"),
("sausage", "500 g")]
</code></pre>
<blockquote></blockquote>
<p>Results in a list: only (!) to visualize them</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Map</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/fun/legomap.png">
        
      </figure><ul>
<li>Takes a function and a sequence as params</li>
<li><em>Higher order function</em></li>
<li>Applies the function to each value</li>
<li>Returns the sequence of results</li>
</ul>
<pre class="prettyprint" data-lang="python"><code>&gt;&gt;&gt; from math import sqrt
&gt;&gt;&gt; values = [0, 1, 2, 3, 4]
&gt;&gt;&gt; list(map(sqrt, values))
[0.0, 1.0, 1.4142, 1.7320, 2.0]
</code></pre>
<pre class="prettyprint" data-lang="python"><code>&gt;&gt;&gt; from math import sqrt
&gt;&gt;&gt; list(map(sqrt, range(5)))
[0.0, 1.0, 1.4142, 1.7320, 2.0]
</code></pre>
<blockquote></blockquote>
<p>Results in a list: only (!) to visualize them</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Sort and reverse</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="python"><code>&gt;&gt;&gt; grocery = ["spam", "egg", "bacon", "sausage"]
&gt;&gt;&gt; sorted(grocery)
['bacon', 'egg', 'sausage', 'spam']
&gt;&gt;&gt; sorted(grocery, reverse=True)
['spam', 'sausage', 'egg', 'bacon']
&gt;&gt;&gt; sorted(grocery, key=len)  # lengths of elements are compared
['egg', 'spam', 'bacon', 'sausage']
</code></pre>
<pre class="prettyprint" data-lang="python"><code>&gt;&gt;&gt; list(reversed(grocery))
['sausage', 'bacon', 'egg', 'spam']
</code></pre>
<pre class="prettyprint" data-lang="python"><code>&gt;&gt;&gt; grocery.sort()     # in-place
&gt;&gt;&gt; grocery.reverse()  # in-place
&gt;&gt;&gt; grocery
['spam', 'sausage', 'egg', 'bacon']
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Dictionary</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/fun/dictionary.png">
        
      </figure><ul>
<li>Sometimes called <em>map</em> or <em>associative array</em></li>
<li>Unordered set of key / value pairs<ul>
<li>Keys are <em>unique</em>: like <em>indices</em> for lists, to access the associated value</li>
<li>They can be <code>int</code> or <strong><code>str</code></strong> (or any other immutable type)</li>
</ul>
</li>
</ul>
<pre class="prettyprint" data-lang="python"><code>&gt;&gt;&gt; tel = {"john": 4098, "terry": 4139}
&gt;&gt;&gt; tel["john"]
4098
&gt;&gt;&gt; tel["graham"] = 4127
&gt;&gt;&gt; tel
{"graham": 4127, "terry": 4139, "john": 4098}
</code></pre>
<blockquote></blockquote>
<p>Try also <code>list(tel)</code> and <code>list(tel.items())</code></p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Multidim lists</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="python"><code>a = [['A', 'B', 'C', 'D'],
     ['E', 'F', 'G', 'H'],
     ['I', 'L', 'M', 'N']]          # 2D

b = ['A', 'B', 'C', 'D',
     'E', 'F', 'G', 'H',
     'I', 'L', 'M', 'N']            # 1D

i = y * cols + x                    # 2D -&gt; 1D

y = i // cols
x = i % cols                        # 1D -&gt; 2D
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Sum of columns: matrix</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="python"><code>matrix = [[2, 4, 3, 8],
          [9, 3, 2, 7],
          [5, 6, 9, 1]]
rows = len(matrix)
cols = len(matrix[0])

for x in range(cols):
    total = 0
    for y in range(rows):
        val = matrix[y][x]
        total += val
    print("Col #", x, "sums to", total)
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>List as pseudo-matrix</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="python"><code>matrix = [2, 4, 3, 8,
          9, 3, 2, 7,
          5, 6, 9, 1]
rows = 3  # Cannot be guessed from matrix alone
cols = len(matrix) // rows

for x in range(cols):
    total = 0
    for y in range(rows):
        val = matrix[y * cols + x]   # 2D -&gt; 1D
        total += val
    print("Col #", x, "sums to", total)
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Matrix with known size</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="python"><code>matrix = [[' ' for x in range(cols)] for y in range(rows)]
# all elements are inited as ' ' -- your need may vary
</code></pre>
<pre class="prettyprint" data-lang="python"><code>matrix = []
for y in range(rows):
    new_row = []
    for x in range(cols):
        new_row.append(' ')
    matrix.append(new_row)
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Data streams</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/fun/magnetic-tape.png">
        
      </figure><ul>
<li><strong>Stream</strong>: abstraction for information stream<ul>
<li>Reading and writing information on <em>any</em> I/O device (<em>file, and more</em>)</li>
</ul>
</li>
<li><strong>Text file</strong><ul>
<li>Various encodings (<em>UTF-8</em>, or other)</li>
<li>Automatic conversions, e.g. <code>"\n"</code> → <code>"\r\n"</code></li>
</ul>
</li>
<li><strong>Binary file</strong><ul>
<li>Precise I/O, bytes are not converted</li>
<li>Any file... also a text file!</li>
</ul>
</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Writing on file</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li><code>open</code> function to access a file (text, by default)<ul>
<li>Write or read mode: <code>"w"</code>, o <code>"r"</code> (def.)</li>
</ul>
</li>
<li>Writing to file: <code>print</code> funtion, or <code>write</code> method</li>
<li><code>with</code> section: at the end the file is closed (also in case of error)</li>
</ul>
<pre class="prettyprint" data-lang="python"><code>with open("some_file.txt", "w") as f1:
    f1.write("First line\n")   # explicit newline
    f1.write("Second line\n")  # continue writing here...

with open("other_file.txt", "w") as f2:
    for x in range(10):
        print(x, x ** 2, file=f2)
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Reading from file</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="python"><code>with open("some_file.txt", "r") as f1:
    first_line = f1.readline()
    second_line = f1.readline()
    # both strings contain '\n' at the end
    # at end of file, an empty string is read

with open("other_file.txt", "r") as f2:
    whole_text = f2.read()
    # do stg with whole_text

with open("last_file.txt", "r") as f3:
    for line in f3:
        # line contains '\n' at the end
        # strip() removes withespaces at both ends
        print(line.strip(), ':', len(line))
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Basic CSV files</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>matrix = []
cols, rows = 0, 0

with open('matrix.csv', 'r') as file1:
    for line in file1:
        splitted = line.split(',')
        vals = [int(i) for i in splitted]
        matrix.append(vals)
        ## matrix += vals  # for a simple list (ex. 4.5)

        if cols == 0:
            cols = len(vals)
        rows += 1
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>CSV module</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>import csv
matrix = []
with open('some.csv', newline='') as f:
    reader = csv.reader(f)
    for row in reader:
        matrix.append(row)
print(matrix)

with open('some.csv', 'w', newline='') as f:
    writer = csv.writer(f)
    for row in matrix
        writer.writerow(row)
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>I/O for strings and console</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Strings as streams: <code>io.StringIO</code></li>
<li>Console as stream: <code>sys.stdin</code>, <code>sys.stdout</code>, <code>sys.stderr</code></li>
</ul>
<pre class="prettyprint" data-lang="python"><code>import io, sys

with io.StringIO() as output:
    output.write("First line.\n")
    print("Second line.", file=output)
    # Retrieve stream contents, i.e. "First line.\nSecond line.\n"
    contents = output.getvalue()
    sys.stdout.write(contents)
</code></pre>
<pre class="prettyprint" data-lang="python"><code>for line in sys.stdin:  # CTRL-D (Lin) or CTRL-Z (Win) to end the input
    print(len(line))    # notice '\n' at the end
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Errors on file</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/fun/garbled-tape.png">
        
      </figure><ul>
<li><strong>Exceptions</strong>: to handle unexpected cases separately<ul>
<li>Error inside <code>try</code>: esecution is interrupted immediately</li>
<li><code>except</code> section is executed, to handle the specific type of error (multiple <code>except</code> sections are allowed)</li>
<li>A <code>with</code> section assures the file is closed</li>
</ul>
</li>
</ul>
<pre class="prettyprint" data-lang="python"><code>try:
    with open("other_file.txt", "r") as f:
        whole_text = f.read()
        # do stg with whole_text
except IOError as err:
    print("Oh, my!")
</code></pre></article>
 
</slide>

<slide class="segue dark" >
  
    <aside class="gdbar"><img src="images/logo.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Scientific Python</h2>
      <h3></h3>
    </hgroup>
  
</slide>

<slide class="large-image" >
  
    <hgroup>
      <h2>Lists in memory</h2>
      <h3></h3>
    </hgroup>
    <article >
      <p><img alt="" src="images/scipy/python-list-list.svg" /></p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Number crunching in Python</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Inefficient <strong>memory</strong> layout<ul>
<li>Multiple <em>dereferencing</em> steps</li>
<li>Each value is a “<em>fat</em>” object, an <code>int</code> takes dozens of bytes</li>
<li>Values are <em>not contiguous</em>, not cache friendly</li>
</ul>
</li>
<li><code>a + b</code> executed as:<ul>
<li><code>a.__add__(b)</code>, or...</li>
<li><code>b.__radd__(a)</code>, if <code>__add__</code> not found</li>
</ul>
</li>
<li>Python is <strong>dynamic</strong><ul>
<li><em>Monkey patching</em></li>
<li>Any method, special or not, can be changed or <em>decorated</em> at any time</li>
<li>Lookup at each call</li>
</ul>
</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Method lookup</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>In general, methods are handled as attributes<ul>
<li>Complex lookup in multiple dictionaries</li>
<li>Starts with <code>a.__getattribute__("something")</code></li>
<li>An <em>instance</em> has its own methods</li>
<li>A <em>class</em> has its own methods</li>
<li>A <em>base class</em> has its own methods</li>
<li>A <em>metaclass</em> may also alter the lookup</li>
</ul>
</li>
<li>“Special methods” are... <em>special</em><ul>
<li>Cannot be set for a single instance</li>
<li>Faster lookup</li>
<li>Still possibly going through multiple dictionaries</li>
</ul>
</li>
</ul></article>
 
</slide>

<slide class="large-figure" >
  
    <hgroup>
      <h2>Anaconda</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/dev/jupyter-notebook.png">
        
      </figure><ul>
<li>Popular open-source distribution of Python: <a href="http://anaconda.com">http://anaconda.com</a></li>
<li>Based on the Scipy.org ecosystem</li>
<li>Modules for <em>data analysis</em> and <em>machine learning</em></li>
<li>Conda: package management</li>
<li>Numba: JIT compiler, code vectorization</li>
<li>Jupyter Notebook: browser-based REPL<ul>
<li><code>$ jupyter notebook</code></li>
</ul>
</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Virtual environments</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Standard Python provides <em>virtual environments</em></li>
<li>To install different modules for different projects</li>
<li>Ex.: <em>create</em> <code>myenv</code> env., <em>activate</em> it, <em>install</em> some modules</li>
</ul>
<pre class="prettyprint" data-lang="Shell"><code>$ python3 -m venv myenv
$ source myenv/bin/activate
$ pip install numpy
</code></pre>
<ul>
<li>First command creates new folder, with a copy of CPython</li>
<li>To change to another env, <em>deactivate</em> the current one<ul>
<li>To delete an env, delete its folder</li>
</ul>
</li>
<li>On Windows, scripts are in the <code>Script</code> folder<ul>
<li><code>sci-env\Scripts\activate.bat</code></li>
</ul>
</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Anaconda environments</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Shell"><code>$ conda create --name myenv
$ conda install -n myenv numpy
$ conda activate myenv
...
$ conda deactivate myenv
$ conda remove --name myenv --all
</code></pre>
<ul>
<li>It is also possible to specify a Python version<ul>
<li><code>conda create -n myenv python=3.4</code></li>
</ul>
</li>
</ul></article>
 
</slide>

<slide class="segue dark" >
  
    <aside class="gdbar"><img src="images/logo.png"></aside>
    <hgroup class="auto-fadein">
      <h2>NumPy</h2>
      <h3></h3>
    </hgroup>
  
</slide>

<slide class="large-figure" >
  
    <hgroup>
      <h2>Modulo NumPy</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/scipy/numpy-mem.png">
        
      </figure><ul>
<li>Numeric, 1995; NumPy, 2006</li>
<li><strong>N-dimensional array</strong><ul>
<li>Homogeneously typed</li>
<li>Efficient memory layout (~ C)</li>
</ul>
</li>
<li>Efficient <strong>algorithms</strong><ul>
<li>Impl. Fortran, C/C++, Cython</li>
<li>Functionality comparable to basic <em>MATLAB</em></li>
</ul>
</li>
<li>Base of <em>SciPy</em> ecosystem<ul>
<li>MatPlotLib, SymPy, Pandas, Scikit-learn, Scikit-image</li>
</ul>
</li>
<li>Also used for <em>images</em><ul>
<li>In PyGame, Python bindings of OpenCV, etc.</li>
</ul>
</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>NumPy arrays</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; a = np.array([2, 3, 4])
&gt;&gt;&gt; a
array([2, 3, 4])
&gt;&gt;&gt; a.dtype
dtype('int64')
</code></pre>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; b = np.array([1.2, 3.5, 5.1])
&gt;&gt;&gt; b.dtype
dtype('float64')
</code></pre>
<pre class="prettyprint" data-lang="Python"><code>c = np.array([[1, 2], [3, 4]], dtype=np.float64)
&gt;&gt;&gt; c
array([[1., 2.],
       [3., 4.]])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Zeros and ones</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; np.zeros(4)
array([0., 0., 0., 0.])

&gt;&gt;&gt; np.ones((2, 3), dtype=np.int16)  # dtype can also be specified
array([[[ 1, 1, 1],
        [ 1, 1, 1]], dtype=int16)

&gt;&gt;&gt; np.empty((2, 3))  # uninitialized, output may vary
array([[3.73603959e-262, 6.02658058e-154, 6.55490914e-260],
       [5.30498948e-313, 3.14673309e-307, 1.00000000e+000]])

&gt;&gt;&gt; np.random.random((2, 3))
array([[ 0.1528439 ,  0.00263175,  0.21967677],
       [ 0.66804669,  0.84067279,  0.23624629]])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Range and shape</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; np.arange(10, 30, 5)  # from 10, to 30, step 5
array([10, 15, 20, 25])
</code></pre>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; np.linspace(0, 2, 5)  # 5 numbers from 0 to 2
array([0., 0.5, 1., 1.5, 2.])
</code></pre>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; a = np.arange(15).reshape(3, 5)
&gt;&gt;&gt; a
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14]])
&gt;&gt;&gt; a.shape
(3, 5)
</code></pre>
<ul>
<li><em>Shape</em>: the number of elements along each axis</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Exercise - Memory game</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/misc/memory.png">
        
      </figure><ul>
<li><code>np.tile(a, reps)</code> repeats the whole <code>a</code></li>
<li><code>np.repeat(a, reps)</code> repeats each element of <code>a</code><ul>
<li>There's also a method of <code>ndarray</code></li>
</ul>
</li>
<li><code>np.random.shuffle(a)</code> shuffles <code>a</code></li>
<li><em>Exercise</em>: create a matrix with couples<ul>
<li>Given <code>n = rows * cols</code></li>
<li><code>n / 2</code> different values, each repeated twice</li>
<li>But random positions</li>
</ul>
</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Elementwise operations</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Most operators apply elementwise</li>
<li>A new array holds the result</li>
<li>Some ops act <em>in place</em>: <code>+=</code>, <code>*=</code>, ...</li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; a = np.array([20, 30, 40, 50])
&gt;&gt;&gt; a &lt; 35
array([True, True, False, False])

&gt;&gt;&gt; b = np.arange(4)
&gt;&gt;&gt; b ** 2
array([0, 1, 4, 9])
&gt;&gt;&gt; a - b
array([20, 29, 38, 47])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Matrix multiplication</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/scipy/matrix-mult.svg">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; A = np.array([[1, 1],
...               [0, 1]])
&gt;&gt;&gt; B = np.array([[2, 0],
...               [3, 4]])
&gt;&gt;&gt; A * B                 # elementwise product
array([[2, 0],
       [0, 4]])
&gt;&gt;&gt; A @ B                 # matrix product (Py3.5)
array([[5, 4],
       [3, 4]])
&gt;&gt;&gt; A.dot(B)              # another matrix product
array([[5, 4],
       [3, 4]])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Aggregate functions</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>By default, array handled as a list of numbers, regardless of shape</li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; b = np.arange(12).reshape(3, 4)
&gt;&gt;&gt; b
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
&gt;&gt;&gt; b.sum()              # guess also min and max
66
&gt;&gt;&gt; b.sum(axis=1)        # sum of each row
array([ 6, 22, 38])
&gt;&gt;&gt; b / b.max(axis=0)    # morm each column
array([[0.  , 0.11, 0.2 , 0.27],
       [0.5 , 0.55, 0.6 , 0.63],
       [1.  , 1.  , 1.  , 1.  ]])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Universal functions</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Math funcs provided as “<em>universal functions</em>” (<em>ufunc</em>)<ul>
<li>Operate elementwise and return an array</li>
<li><code>sin</code>, <code>cos</code>, <code>exp</code> etc.</li>
</ul>
</li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; A = np.linspace(0, np.pi/2, 4)
&gt;&gt;&gt; np.sin(A)
array([0., 0.5, 0.8660254, 1.])
</code></pre>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; B = np.arange(3)
&gt;&gt;&gt; B
array([0, 1, 2])
&gt;&gt;&gt; np.exp(B)
array([1., 2.71828183, 7.3890561])
&gt;&gt;&gt; np.sqrt(B)
array([0., 1., 1.41421356])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Indexing and slicing</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Multidimensional arrays: one index per axis<ul>
<li>Indices are given in a tuple separated by commas</li>
</ul>
</li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; def f(y, x): return 10 * y + x
&gt;&gt;&gt; b = np.fromfunction(f, (3, 4), dtype=int)
&gt;&gt;&gt; b
array([[ 0,  1,  2,  3],
       [10, 11, 12, 13],
       [20, 21, 22, 23]])
&gt;&gt;&gt; b[2, 3]
23
&gt;&gt;&gt; b[:, 1]  # each row in the second column of b
array([1, 11, 21])
&gt;&gt;&gt; b[1:3, 0:2]
array([[10, 11],
       [20, 21]])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Dots</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Dots (<code>...</code>) represent as many colons as needed<ul>
<li>... to produce a complete indexing tuple</li>
</ul>
</li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; c = np.array( [[[  0,  1,  2],    # a 3D array
                    [ 10, 12, 13]],
                   [[100,101,102],
                    [110,112,113]]])
&gt;&gt;&gt; c.shape
(2, 2, 3)
&gt;&gt;&gt; c[1,...]  # same as c[1,:,:] or c[1]
array([[100, 101, 102],
       [110, 112, 113]])
&gt;&gt;&gt; c[...,2]  # same as c[:,:,2]
array([[  2,  13],
       [102, 113]])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Iterating</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Iterating over a multidim. array: wrt the first axis</li>
<li>The <code>flat</code> attribute is an iterator over all the elements</li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; b
array([[ 0,  1,  2,  3],
       [10, 11, 12, 13],
       [20, 21, 22, 23]])
&gt;&gt;&gt; for row in b: print(row)
[0 1 2 3]
[10 11 12 13]
[20 21 22 23]
&gt;&gt;&gt; for val in b.flat: print(val, end=" ")
0 1 2 3 10 11 12 13 20 21 22 23
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Shape manipulation</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; a = np.random.randint(10, size=(3, 4))
&gt;&gt;&gt; a
array([[ 2.,  8.,  0.,  6.],
       [ 4.,  5.,  1.,  1.],
       [ 8.,  9.,  3.,  6.]])
&gt;&gt;&gt; a.ravel()  # returns a new view, flattened
array([ 2.,  8.,  0.,  6.,  4.,  5.,  1.,  1.,  8.,  9.,  3.,  6.])
&gt;&gt;&gt; a.reshape(2, 6)  # new view, different shape
array([[ 2.,  8.,  0.,  6.,  4.,  5.],
       [ 1.,  1.,  8.,  9.,  3.,  6.]])
&gt;&gt;&gt; a.resize(2, 6)  # modifies the array itself
&gt;&gt;&gt; a
array([[ 2.,  8.,  0.,  6.,  4.,  5.],
       [ 1.,  1.,  8.,  9.,  3.,  6.]])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Transposition</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; a = np.array([[ 2.,  8.,  0.],
                  [ 4.,  5.,  1.]])
&gt;&gt;&gt; a.shape
(2, 3)
&gt;&gt;&gt; a.strides
(24, 8)
&gt;&gt;&gt; a.T  # returns a transposed view, same as a.transpose()
array([[ 2.,  4.],
       [ 8.,  5.],
       [ 0.,  1.]])
&gt;&gt;&gt; a.T.shape
(3, 2)
&gt;&gt;&gt; a.T.strides
(8, 24)
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Stacking</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; a = np. array([[ 8.,  8.],
                   [ 0.,  0.]])
&gt;&gt;&gt; b = np.array([[ 1.,  8.],
                  [ 0.,  4.]])
&gt;&gt;&gt; np.vstack((a, b))
array([[ 8.,  8.],
       [ 0.,  0.],
       [ 1.,  8.],
       [ 0.,  4.]])
&gt;&gt;&gt; np.hstack((a, b))
array([[ 8.,  8.,  1.,  8.],
       [ 0.,  0.,  0.,  4.]])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Splitting into several arrays</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li><code>hsplit</code> splits an array along its horizontal axis<ul>
<li>Specify num of equally shaped arrays to return, or...</li>
<li>Specifying columns where division should occur</li>
</ul>
</li>
<li><code>vsplit</code> works on the vertical axis</li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; a = np.array([[9., 5., 6., 3., 6., 8., 0., 7., 9.],
                  [1., 4., 9., 2., 2., 1., 0., 6., 2.]])
&gt;&gt;&gt; np.hsplit(a, 3)   # Split a into 3
[array([[ 9.,  5.,  6.], [ 1.,  4.,  9.]]),
 array([[ 3.,  6.,  8.], [ 2.,  2.,  1.]]),
 array([[ 0.,  7.,  9.], [ 0.,  6.,  2.]])]
&gt;&gt;&gt; np.hsplit(a, (3, 4))   # Split after 3rd and 4th column
[array([[ 9.,  5.,  6.], [ 1.,  4.,  9.]]),
 array([[ 3.], [ 2.]]),
 array([[ 6.,  8.,  0.,  7.,  9.], [ 2.,  1.,  0.,  6.,  2.]])]
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Linear algebra</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre><code>&gt;&gt;&gt; a = np.array([[1.0, 2.0],
                  [3.0, 4.0]])
&gt;&gt;&gt; b = np.linalg.inv(a)
&gt;&gt;&gt; b
array([[-2. ,  1. ],
       [ 1.5, -0.5]])
&gt;&gt;&gt; a @ b
array([[ 1.,  0. ],
       [ 0.,  1. ]])
&gt;&gt;&gt; u = np.eye(2)  # unit 2x2 matrix; "eye" represents "I"
&gt;&gt;&gt; u
array([[ 1.,  0.],
       [ 0.,  1.]])
</code></pre></article>
 
</slide>

<slide class="large-figure" >
  
    <hgroup>
      <h2>Exercise - Fair tickets</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/misc/fair-tickets.jpg">
        
      </figure><ul>
<li>Cost of a ticket for a fair<ul>
<li>4.00€ for adults</li>
<li>1,50€ for children</li>
</ul>
</li>
<li>At the end of the day<ul>
<li>2200 visitors have entered (<em>b1</em>)</li>
<li>5050€ have been collected (<em>b2</em>)</li>
</ul>
</li>
<li>How many adults (<em>x1</em>) and how many children (<em>x2</em>) have entered?<ul>
<li>Linear system (<code>a @ x = b</code>)</li>
<li>Solve with matrix operations</li>
</ul>
</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Determinant and autovectors</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; a = np.array([[1.0, 2.0],
                  [3.0, 4.0]])
&gt;&gt;&gt; np.linalg.det(a)
-2.0
&gt;&gt;&gt; w, v = np.linalg.eig(a)
&gt;&gt;&gt; w  # eigenvalues
array([-0.37228132,  5.37228132])
&gt;&gt;&gt; np.linalg.det(w[0] * np.eye(2) - a)  # det(λI − A) = 0
0.0
&gt;&gt;&gt; v.T  # eigenvectors, normalized but transposed (!)
array([[-0.82456484,  0.56576746],
       [-0.41597356, -0.90937671]])
&gt;&gt;&gt; sum(v.T[0] ** 2)  # magnitude = 1
1.0
&gt;&gt;&gt; (w[0] * np.eye(2) - a) @ v.T[0]  # (λI − A)v = 0    
array([ 0.,  0.])
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Solve a linear system</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; a = np.array([[1, 1],
                  [4, 1.5]])
&gt;&gt;&gt; b = np.array([2200, 5050])
&gt;&gt;&gt; np.linalg.inv(a) @ b
array([  700.,  1500.])
&gt;&gt;&gt; np.linalg.solve(a, b)   
array([  700.,  1500.])
</code></pre></article>
 
</slide>

<slide class="segue dark" >
  
    <aside class="gdbar"><img src="images/logo.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Pandas</h2>
      <h3></h3>
    </hgroup>
  
</slide>

<slide  >
  
    <hgroup>
      <h2>Pandas</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Library of data <em>structures</em> and data <em>analysis tools</em><ul>
<li>High-performance, easy-to-use</li>
<li>Use cases are similar to R-lang</li>
</ul>
</li>
<li>Often used with <em>Jupyter Notebook</em>, Web app to create and share documents<ul>
<li>Fragments of code in various languages</li>
<li>Can be executed and modified</li>
<li>Equations, visualizations, text</li>
<li>Useful for data cleaning and transformation, numerical simulation, statistical modeling, data visualization, machine learning, etc.</li>
</ul>
</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Creating a DataFrame</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; dates = pd.date_range('20130101', periods=6)
&gt;&gt;&gt; dates
DatetimeIndex(['2013-01-01', '2013-01-02', '2013-01-03',
               '2013-01-04', '2013-01-05', '2013-01-06'],
              dtype='datetime64[ns]', freq='D')
&gt;&gt;&gt; df = pd.DataFrame(np.random.randn(6,4), index=dates,
                      columns=list('ABCD'))
&gt;&gt;&gt; df
                   A         B         C         D
2013-01-01  0.469112 -0.282863 -1.509059 -1.135632
2013-01-02  1.212112 -0.173215  0.119209 -1.044236
2013-01-03 -0.861849 -2.104569 -0.494929  1.071804
2013-01-04  0.721555 -0.706771 -1.039575  0.271860
2013-01-05 -0.424972  0.567020  0.276232 -1.087401
2013-01-06 -0.673690  0.113648 -1.478427  0.524988
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>DataFrame from a dict</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df2 = pd.DataFrame({
        'A' : 1.,
        'B' : pd.Timestamp('20130102'),
        'C' : pd.Series(1,index=list(range(4)),dtype='float32'),
        'D' : np.array([3] * 4,dtype='int32'),
        'E' : pd.Categorical(["test","train","test","train"]),
        'F' : 'foo' })
&gt;&gt;&gt; df2
     A          B    C  D      E    F
0  1.0 2013-01-02  1.0  3   test  foo
1  1.0 2013-01-02  1.0  3  train  foo
2  1.0 2013-01-02  1.0  3   test  foo
3  1.0 2013-01-02  1.0  3  train  foo
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Data summary</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>View top or bottom rows: <code>df.head()</code>, <code>df.tail()</code></li>
<li>Access index, columns, data: <code>df.index</code>, <code>df.columns</code>, <code>df.values</code></li>
<li>Transpose: <code>df.T</code></li>
<li>Show static summary</li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df.describe()
              A         B         C         D
count  6.000000  6.000000  6.000000  6.000000
mean   0.073711 -0.431125 -0.687758 -0.233103
std    0.843157  0.922818  0.779887  0.973118
min   -0.861849 -2.104569 -1.509059 -1.135632
25%   -0.611510 -0.600794 -1.368714 -1.076610
50%    0.022070 -0.228039 -0.767252 -0.386188
75%    0.658444  0.041933 -0.034326  0.461706
max    1.212112  0.567020  0.276232  1.071804
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Sorting by values or index</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df.sort_values(by='B')  # asc values of B
                   A         B         C         D
2013-01-03 -0.861849 -2.104569 -0.494929  1.071804
2013-01-04  0.721555 -0.706771 -1.039575  0.271860
2013-01-01  0.469112 -0.282863 -1.509059 -1.135632
2013-01-02  1.212112 -0.173215  0.119209 -1.044236
2013-01-06 -0.673690  0.113648 -1.478427  0.524988
2013-01-05 -0.424972  0.567020  0.276232 -1.087401

&gt;&gt;&gt; df.sort_index(axis=1, ascending=False)  # desc column names
                   D         C         B         A
2013-01-01 -1.135632 -1.509059 -0.282863  0.469112
2013-01-02 -1.044236  0.119209 -0.173215  1.212112
2013-01-03  1.071804 -0.494929 -2.104569 -0.861849
2013-01-04  0.271860 -1.039575 -0.706771  0.721555
2013-01-05 -1.087401  0.276232  0.567020 -0.424972
2013-01-06  0.524988 -1.478427  0.113648 -0.673690
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Projection of columns</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df['A']
2013-01-01    0.469112
2013-01-02    1.212112
2013-01-03   -0.861849
2013-01-04    0.721555
2013-01-05   -0.424972
2013-01-06   -0.673690
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Selection of rows</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df[0:3]
                   A         B         C         D
2013-01-01  0.469112 -0.282863 -1.509059 -1.135632
2013-01-02  1.212112 -0.173215  0.119209 -1.044236
2013-01-03 -0.861849 -2.104569 -0.494929  1.071804

&gt;&gt;&gt; df['20130102':'20130104']
                   A         B         C         D
2013-01-02  1.212112 -0.173215  0.119209 -1.044236
2013-01-03 -0.861849 -2.104569 -0.494929  1.071804
2013-01-04  0.721555 -0.706771 -1.039575  0.271860
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Slicing in both axis</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df.loc['20130102':'20130104',['A','B']]
                   A         B
2013-01-02  1.212112 -0.173215
2013-01-03 -0.861849 -2.104569
2013-01-04  0.721555 -0.706771

&gt;&gt;&gt; df.iloc[3:5,0:2]
                   A         B
2013-01-04  0.721555 -0.706771
2013-01-05 -0.424972  0.567020
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Boolean filtering</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df[df.A &gt; 0]
                   A         B         C         D
2013-01-01  0.469112 -0.282863 -1.509059 -1.135632
2013-01-02  1.212112 -0.173215  0.119209 -1.044236
2013-01-04  0.721555 -0.706771 -1.039575  0.271860

&gt;&gt;&gt; df[df &gt; 0]
                   A         B         C         D
2013-01-01  0.469112       NaN       NaN       NaN
2013-01-02  1.212112       NaN  0.119209       NaN
2013-01-03       NaN       NaN       NaN  1.071804
2013-01-04  0.721555       NaN       NaN  0.271860
2013-01-05       NaN  0.567020  0.276232       NaN
2013-01-06       NaN  0.113648       NaN  0.524988
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Setting</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df2 = df.copy()
&gt;&gt;&gt; df2[df2 &gt; 0] = -df2
&gt;&gt;&gt; df2
                   A         B         C  D    F
2013-01-01  0.000000  0.000000 -1.509059 -5  NaN
2013-01-02 -1.212112 -0.173215 -0.119209 -5 -1.0
2013-01-03 -0.861849 -2.104569 -0.494929 -5 -2.0
2013-01-04 -0.721555 -0.706771 -1.039575 -5 -3.0
2013-01-05 -0.424972 -0.567020 -0.276232 -5 -4.0
2013-01-06 -0.673690 -0.113648 -1.478427 -5 -5.0
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Is-in</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df2 = df.copy()
&gt;&gt;&gt; df2['E'] = ['one', 'one','two','three','four','three']
&gt;&gt;&gt; df2
                   A         B         C         D      E
2013-01-01  0.469112 -0.282863 -1.509059 -1.135632    one
2013-01-02  1.212112 -0.173215  0.119209 -1.044236    one
2013-01-03 -0.861849 -2.104569 -0.494929  1.071804    two
2013-01-04  0.721555 -0.706771 -1.039575  0.271860  three
2013-01-05 -0.424972  0.567020  0.276232 -1.087401   four
2013-01-06 -0.673690  0.113648 -1.478427  0.524988  three

&gt;&gt;&gt; df2[df2['E'].isin(['two','four'])]
                   A         B         C         D     E
2013-01-03 -0.861849 -2.104569 -0.494929  1.071804   two
2013-01-05 -0.424972  0.567020  0.276232 -1.087401  four
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Histogramming</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; s = pd.Series(np.random.randint(7, size=10))
&gt;&gt;&gt; s
0    4
1    2
2    1
3    2
...
dtype: int64
&gt;&gt;&gt; s.value_counts()
4    5
6    2
2    2
1    1
dtype: int64
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Concat and merge</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Take multiple pandas and put them together</li>
<li><code>concat()</code>: one piece below the other</li>
<li><code>merge()</code>: rows are joined when they have the same <code>key</code></li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; left = pd.DataFrame({'key': ['foo', 'bar'], 'lval': [1, 2]})
&gt;&gt;&gt; right = pd.DataFrame({'key': ['foo', 'bar'], 'rval': [4, 5]})
&gt;&gt;&gt; pd.merge(left, right, on='key')
   key  lval  rval
0  foo     1     4
1  bar     2     5
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Group-by</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Split data into groups based on some criteria</li>
<li>Apply a function to each group independently</li>
<li>Combine the results into a data structure</li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df = pd.DataFrame({'A' : ['foo', 'bar', 'foo', 'bar',
                              'foo', 'bar', 'foo', 'foo'],
                       'B' : ['one', 'one', 'two', 'three',
                              'two', 'two', 'one', 'three'],
                       'C' : np.random.randn(8),
                       'D' : np.random.randn(8)})
&gt;&gt;&gt; df.groupby('A').sum()
            C        D
A
bar -2.802588  2.42611
foo  3.146492 -0.63958
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Pivot table</h2>
      <h3></h3>
    </hgroup>
    <article >
      <ul>
<li>Reshape the dataframe<ul>
<li>Using values as new rows and columns titles</li>
<li>Cells contain averages, i.e., <code>aggfunc=np.mean</code></li>
</ul>
</li>
</ul>
<pre class="prettyprint" data-lang="Python"><code>&gt;&gt;&gt; df = pd.DataFrame({
        'A' : ['one', 'one', 'two', 'three'] * 3,
        'B' : ['A', 'B', 'C'] * 4,
        'C' : ['foo', 'foo', 'foo', 'bar', 'bar', 'bar'] * 2,
        'D' : np.random.randn(12),
        'E' : np.random.randn(12)})
&gt;&gt;&gt; pd.pivot_table(df, values='D', index='A', columns='C')
C           bar       foo
A
one    0.463952  0.419066
three -0.660418  0.991739
two    0.091446  0.236650
</code></pre></article>
 
</slide>

<slide class="segue dark" >
  
    <aside class="gdbar"><img src="images/logo.png"></aside>
    <hgroup class="auto-fadein">
      <h2>MatPlotLib</h2>
      <h3></h3>
    </hgroup>
  
</slide>

<slide  >
  
    <hgroup>
      <h2>Basic plots</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/scipy/pyplot-1.png"><img src="images/scipy/pyplot-2.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>import matplotlib.pyplot as plt
plt.plot([1, 2, 3, 4])
plt.ylabel('some numbers')
plt.show()
</code></pre>
<pre class="prettyprint" data-lang="Python"><code># plot x versus y
plt.plot([1, 2, 3, 4], [1, 4, 9, 16])
plt.show()
</code></pre>
<blockquote></blockquote>
<p><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot">matplotlib.org</a></p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Formatting the plot</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/scipy/pyplot-3.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>plt.plot([1, 2, 3, 4], [1, 4, 9, 16], 'ro')
plt.axis([0, 6, 0, 20])  # xmin, xmax, ymin, ymax
plt.show()
</code></pre>
<pre class="prettyprint" data-lang="Python"><code># example format strings
'b'    # blue markers with default shape
'ro'   # red circles
'g-'   # green solid line
'--'   # dashed line with default color
'k^:'  # black triangle_up markers connected by a dotted line
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Plotting NumPy arrays</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/scipy/pyplot-4.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code># evenly sampled time at 200ms intervals
t = np.arange(0., 5., 0.2)

# red dashes, blue squares and green triangles
plt.plot(t, t, 'r--',
         t, t**2, 'bs',
         t, t**3, 'g^')
plt.show()
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Plotting data from dict</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/scipy/pyplot-5.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>data = {'a': np.arange(50),
        'c': np.random.randint(0, 20, 50),
        'd': np.abs(np.random.randn(50)) * 100}
data['b'] = data['a'] + 10 * np.random.randn(50)

plt.scatter('a', 'b', c='c', s='d', data=data)
plt.xlabel('entry a')
plt.ylabel('entry b')
plt.show()

# s for size, c for color
# 'c': one int out of 20 (index for a color-map)
</code></pre></article>
 
</slide>

<slide class="large-figure" >
  
    <hgroup>
      <h2>Plotting with categorical variables</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/scipy/pyplot-6.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>names = ['group_a', 'group_b', 'group_c']
values = [1, 10, 100]

plt.figure(1, figsize=(9, 3))  # inches

plt.subplot(131)  # rows, cols, index
plt.bar(names, values)
plt.subplot(132)  # rows, cols, index
plt.scatter(names, values)
plt.subplot(133)  # rows, cols, index
plt.plot(names, values)
plt.suptitle('Categorical Plotting')
plt.show()
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Subplots in column</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/scipy/pyplot-7.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>def f(t):
    return np.exp(-t) * np.cos(2*np.pi*t)

t1 = np.arange(0.0, 5.0, 0.1)
t2 = np.arange(0.0, 5.0, 0.02)

plt.subplot(211)  # rows, cols, index
plt.plot(t1, f(t1), 'bo', t2, f(t2), 'k')

plt.subplot(212)  # rows, cols, index
plt.plot(t2, np.cos(2*np.pi*t2), 'r--')
plt.show()
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Histogram and text</h2>
      <h3></h3>
    </hgroup>
    <article >
      <figure>
        <img src="images/scipy/pyplot-8.png">
        
      </figure><pre class="prettyprint" data-lang="Python"><code>mu, sigma = 100, 15
x = mu + sigma * np.random.randn(10000)

# histogram of data, with 50 “bins”
plt.hist(x, 50, facecolor='g')

plt.xlabel('Smarts')
plt.ylabel('Probability')
plt.title('Histogram of IQ')
plt.text(60, .025, r'$\mu=100,\ \sigma=15$')
plt.axis([40, 160, 0, 0.03])
plt.grid(True, alpha=0.75)
plt.show()
</code></pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Nonlinear axes</h2>
      <h3></h3>
    </hgroup>
    <article >
      <pre class="prettyprint" data-lang="Python"><code># make up some data in the interval ]0, 1[
y = np.random.normal(loc=0.5, scale=0.4, size=1000)
y = y[(y &gt; 0) &amp; (y &lt; 1)]
y.sort()
x = np.arange(len(y))

# log
plt.plot(x, y)
plt.yscale('log')
plt.title('log')
plt.grid(True)
plt.show()
</code></pre></article>
 
</slide>


<slide class="thank-you-slide segue nobackground">
  <aside class="gdbar right"><img src="images/logo.png"></aside>
  <article class="flexbox vleft auto-fadein">
    <h2>&lt;Domande?&gt;</h2>
  </article>
  <p class="auto-fadein" data-config-contact>
    Michele Tomaiuolo
    <br>
    Palazzina 1, int. 5708
    <br>
    Ingegneria dell'Informazione, UniPR
    <br>
    <a href="http://sowide.unipr.it/tomamic">sowide.unipr.it/tomamic</a>
  </p>
</slide>

<slide class="backdrop"></slide>

</slides>

</body>
</html>